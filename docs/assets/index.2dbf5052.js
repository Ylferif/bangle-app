const Me=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};Me();function $(){}function Te(e){return e()}function ye(){return Object.create(null)}function F(e){e.forEach(Te)}function Pe(e){return typeof e=="function"}function A(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function De(e){return Object.keys(e).length===0}function Ee(e,...t){if(e==null)return $;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function U(e,t,n){e.$$.on_destroy.push(Ee(t,n))}function f(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode.removeChild(e)}function v(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function C(e){return document.createTextNode(e)}function _(){return C(" ")}function Y(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function l(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ce(e){return e===""?null:+e}function Ie(e){return Array.from(e.childNodes)}function z(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function G(e,t){e.value=t==null?"":t}function Z(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ue(e,t,n){e.classList[n?"add":"remove"](t)}let re;function ne(e){re=e}function Be(){if(!re)throw new Error("Function called outside component initialization");return re}function qe(e){Be().$$.on_mount.push(e)}function He(e){Be().$$.on_destroy.push(e)}const te=[],_e=[],ae=[],$e=[],je=Promise.resolve();let ge=!1;function We(){ge||(ge=!0,je.then(Ne))}function ve(e){ae.push(e)}const pe=new Set;let se=0;function Ne(){const e=re;do{for(;se<te.length;){const t=te[se];se++,ne(t),Je(t.$$)}for(ne(null),te.length=0,se=0;_e.length;)_e.pop()();for(let t=0;t<ae.length;t+=1){const n=ae[t];pe.has(n)||(pe.add(n),n())}ae.length=0}while(te.length);for(;$e.length;)$e.pop()();ge=!1,pe.clear(),ne(e)}function Je(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ve)}}const le=new Set;let ze;function R(e,t){e&&e.i&&(le.delete(e),e.i(t))}function W(e,t,n,r){if(e&&e.o){if(le.has(e))return;le.add(e),ze.c.push(()=>{le.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function J(e){e&&e.c()}function M(e,t,n,r){const{fragment:s,on_mount:o,on_destroy:i,after_update:a}=e.$$;s&&s.m(t,n),r||ve(()=>{const u=o.map(Te).filter(Pe);i?i.push(...u):F(u),e.$$.on_mount=[]}),a.forEach(ve)}function D(e,t){const n=e.$$;n.fragment!==null&&(F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Fe(e,t){e.$$.dirty[0]===-1&&(te.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function I(e,t,n,r,s,o,i,a=[-1]){const u=re;ne(e);const c=e.$$={fragment:null,ctx:null,props:o,update:$,not_equal:s,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ye(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};i&&i(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(p,h,...g)=>{const m=g.length?g[0]:h;return c.ctx&&s(c.ctx[p],c.ctx[p]=m)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](m),d&&Fe(e,p)),h}):[],c.update(),d=!0,F(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const p=Ie(t.target);c.fragment&&c.fragment.l(p),p.forEach(O)}else c.fragment&&c.fragment.c();t.intro&&R(e.$$.fragment),M(e,t.target,t.anchor,t.customElement),Ne()}ne(u)}class q{$destroy(){D(this,1),this.$destroy=$}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!De(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const V=[];function Ue(e,t){return{subscribe:Ae(e,t).subscribe}}function Ae(e,t=$){let n;const r=new Set;function s(a){if(A(e,a)&&(e=a,n)){const u=!V.length;for(const c of r)c[1](),V.push(c,e);if(u){for(let c=0;c<V.length;c+=2)V[c][0](V[c+1]);V.length=0}}}function o(a){s(a(e))}function i(a,u=$){const c=[a,u];return r.add(c),r.size===1&&(n=t(s)||$),a(e),()=>{r.delete(c),r.size===0&&(n(),n=null)}}return{set:s,update:o,subscribe:i}}function X(e,t,n){const r=!Array.isArray(e),s=r?[e]:e,o=t.length<2;return Ue(n,i=>{let a=!1;const u=[];let c=0,d=$;const p=()=>{if(c)return;d();const g=t(r?u[0]:u,i);o?i(g):d=Pe(g)?g:$},h=s.map((g,m)=>Ee(g,b=>{u[m]=b,c&=~(1<<m),a&&p()},()=>{c|=1<<m}));return a=!0,p(),function(){F(h),d()}})}var K,fe=[];function Le(){if(navigator.platform.indexOf("Win")>=0&&(navigator.userAgent.indexOf("Chrome/54")>=0||navigator.userAgent.indexOf("Chrome/55")>=0||navigator.userAgent.indexOf("Chrome/56")>=0))return console.warn("Chrome <56 in Windows has navigator.bluetooth but it's not implemented properly"),confirm(`Web Bluetooth on Windows is not yet available.
Please click Ok to see other options for using Web Bluetooth`)&&(window.location="https://www.espruino.com/Puck.js+Quick+Start"),!1;if(navigator.bluetooth)return!0;console.warn("No Web Bluetooth on this platform");var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return e?confirm(`To use Web Bluetooth on iOS you'll need the WebBLE App.
Please click Ok to go to the App Store and download it.`)&&(window.location="https://itunes.apple.com/us/app/webble/id1193531073"):confirm(`This Web Browser doesn't support Web Bluetooth.
Please click Ok to see instructions for enabling it.`)&&(window.location="https://www.espruino.com/Quick+Start+BLE#with-web-bluetooth"),!1}var me="6e400001-b5a3-f393-e0a9-e50e24dcca9e",Xe="6e400002-b5a3-f393-e0a9-e50e24dcca9e",Qe="6e400003-b5a3-f393-e0a9-e50e24dcca9e",xe=20;function k(e,t){ie.log&&ie.log(e,t)}function Ze(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Ve(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,s=e.length;r<s;r++)n[r]=e.charCodeAt(r);return t}function Se(){if(!!fe.length){var e=fe.shift();k(3,"Executing "+JSON.stringify(e)+" from queue"),e.type=="write"?ie.write(e.data,e.callback,e.callbackNewline):k(1,"Unknown queue item "+JSON.stringify(e))}}function Re(e,t){if(!!Le()){var n={on:function(d,p){this["on"+d]=p},emit:function(d,p){this["on"+d]&&this["on"+d](p)},isOpen:!1,isOpening:!0,txInProgress:!1},r=void 0,s,o,i,a=[],u=!1,c=xe;return n.close=function(){n.isOpening=!1,n.isOpen?(n.isOpen=!1,n.emit("close")):e&&e(null),r&&(r.disconnect(),r=void 0,o=void 0,i=void 0,c=xe)},n.write=function(d,p){d&&a.push({data:d,callback:p,maxLength:d.length}),n.isOpen&&!n.txInProgress&&h();function h(){if(u){setTimeout(h,50);return}var g;if(!!a.length){var m=a[0];ie.writeProgress(m.maxLength-m.data.length,m.maxLength),m.data.length<=c?(g=m.data,m.data=void 0):(g=m.data.substr(0,c),m.data=m.data.substr(c)),n.txInProgress=!0,k(2,"Sending "+JSON.stringify(g)),o.writeValue(Ve(g)).then(function(){k(3,"Sent"),m.data||(a.shift(),m.callback&&m.callback()),n.txInProgress=!1,h()}).catch(function(b){k(1,"SEND ERROR: "+b),a=[],n.close()})}}},navigator.bluetooth.requestDevice({filters:[{namePrefix:"Puck.js"},{namePrefix:"Pixl.js"},{namePrefix:"MDBT42Q"},{namePrefix:"RuuviTag"},{namePrefix:"iTracker"},{namePrefix:"Thingy"},{namePrefix:"Espruino"},{services:[me]}],optionalServices:[me]}).then(function(d){k(1,"Device Name:       "+d.name),k(1,"Device ID:         "+d.id),d.addEventListener("gattserverdisconnected",function(){k(1,"Disconnected (gattserverdisconnected)"),t&&t(),n.close()}),n.device=d,n.reconnect(e)}).catch(function(d){k(1,"ERROR: "+d),n.close()}),n.reconnect=function(d){n.device.gatt.connect().then(function(p){return k(1,"Connected"),r=p,p.getPrimaryService(me)}).then(function(p){return k(2,"Got service"),s=p,s.getCharacteristic(Qe)}).then(function(p){return i=p,k(2,"RX characteristic:"+JSON.stringify(i)),i.addEventListener("characteristicvaluechanged",function(h){var g=h.target.value,m=Ze(g.buffer);m.length>c&&(k(2,"Received packet of length "+m.length+", increasing chunk size"),c=m.length);for(var b=0;b<m.length;b++){var y=m.charCodeAt(b),x=!0;y==19?(k(2,"XOFF received => pause upload"),u=!0):y==17?(k(2,"XON received => resume upload"),u=!1):x=!1,x&&(m=m.substr(0,b-1)+m.substr(b+1),b--)}k(3,"Received "+JSON.stringify(m)),n.emit("data",m)}),i.startNotifications()}).then(function(){return s.getCharacteristic(Xe)}).then(function(p){o=p,k(2,"TX characteristic:"+JSON.stringify(o))}).then(function(){n.txInProgress=!1,n.isOpen=!0,n.isOpening=!1,K=!1,fe=[],d(n),n.emit("open"),n.write()}).catch(function(p){k(1,"ERROR: "+p),n.close()})},n}}var w;function he(e,t,n){if(!Le())return;let r;if(typeof t!="function"&&(n=t,r=new Promise((i,a)=>t=(u,c)=>{c?a(c):i(u)})),K)return k(3,"Busy - adding Puck.write to queue"),fe.push({type:"write",data:e,callback:t,callbackNewline:n}),r;var s;function o(){n&&(w.cb=function(c){var d=w.received.indexOf(`
`);if(d>=0){var p=w.received.substr(0,d);w.received=w.received.substr(d+1),w.cb=void 0,s&&clearTimeout(s),s=void 0,t&&t(p),K=!1,Se()}});var i=300,a=n?100:3,u=a;s=setTimeout(function c(){s=void 0,i&&i--,u&&u--,w.hadData&&(u=a),u&&i?s=setTimeout(c,100):(w.cb=void 0,t&&t(w.received),K=!1,Se(),w.received=""),w.hadData=!1},100)}return w&&(w.isOpen||w.isOpening)?(w.txInProgress||(w.received=""),K=!0,w.write(e,o),r):(w=Re(function(i){if(!i){w=void 0,t&&t(null);return}w.received="",w.on("data",function(a){w.received+=a,w.hadData=!0,w.cb&&w.cb(a)}),w.on("close",function(a){w=void 0}),K=!0,w.write(e,o)}),r)}const ie={debug:1,increaseMTU:!0,flowControl:!0,log:function(e,t){e<=this.debug&&console.log("<BLE> "+t)},writeProgress:function(e,t){},connect:Re,write:he,eval:function(e,t){const n=he("Bluetooth.println(JSON.stringify("+e+`))
`,!0).then(function(r){try{return JSON.parse(r)}catch(s){return k(1,"Unable to decode "+JSON.stringify(r)+", got "+s.toString()),Promise.reject(r)}});return t?void n.then(t,r=>t(null,r)):n},setTime:function(e){var t=new Date,n="setTime("+t.getTime()/1e3+");";n+="if (E.setTimeZone) E.setTimeZone("+t.getTimezoneOffset()/-60+`);
`,he(n,e)},isConnected:function(){return w!==void 0},getConnection:function(){return w},close:function(){w&&w.close()},modal:function(e){var t=document.createElement("div");t.style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:0.5;z-index:100;background:black;",t.innerHTML='<div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-family: Sans-Serif;font-size:400%;color:white;">Click to Continue...</div>',t.onclick=function(n){e(),n.preventDefault(),document.body.removeChild(t)},document.body.appendChild(t)}};function H(e,t){return new Promise(n=>e.write(`if(1){${t}}
`,n))}async function Ke(e,t,n){const r=`require('Storage').write('${t}',${n});`;return H(e,r)}function Ge(e,t){return new Promise((n,r)=>ie.connect(s=>{if(!s){r("Failed to connect");return}let o="";s.on("data",i=>{o+=i;const a=o.split(`
`);o=a.pop();for(const u of a)e(u)}),n(s)},t))}function Ye(){const{subscribe:e,update:t}=Ae([!1,{}]);return{connection:void 0,subscribe:e,async connect({triggers:n,polls:r}){this.connection=await Ge(o=>{let i;try{i=JSON.parse(o)}catch{console.warn("Could not parse message",o);return}console.log("[command]",i),t(([a,u])=>[a,{...u,[i.t]:i}])},()=>{t(([,o])=>[!1,o])});const s=async()=>{var o;if(!!((o=this.connection)!=null&&o.isOpen)){for(const i of r)await i(this.connection);this.timeout=setTimeout(s,10*1e3)}};s(),t(([,o])=>[!0,o]);for(const o of n)await o(this.connection)},async disconnect(n){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0);for(const r of n)await r(this.connection);this.connection&&(this.connection.close(),this.connection=void 0),t(([,r])=>[!1,r])},toggle(n,r){return this.connection?this.disconnect(r):this.connect(n)}}}const ee=Ye(),oe=X(ee,([,e])=>e),we=X(ee,([e])=>e),et=X(oe,e=>{var t,n;return(n=(t=e.alarms)==null?void 0:t.alarms)!=null?n:[]}),tt=X(oe,e=>{var t;return(t=e.temperature)==null?void 0:t.temperature}),nt=X(oe,e=>{var t;return(t=e.steps)==null?void 0:t.steps}),rt=X(oe,e=>{var t;return(t=e.status)==null?void 0:t.bat}),it=X(oe,e=>{var t;return(t=e.hrm)==null?void 0:t.hrm});function ot(e){let t,n,r,s,o,i,a,u,c=(e[0]===void 0?"-":e[0])+"",d,p;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Battery",s=_(),o=v("div"),i=E("svg"),a=E("path"),u=_(),d=C(c),p=C("%"),l(r,"class","card-title"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"d","M13 10V3L4 14h7v7l9-11h-7z"),l(i,"xmlns","http://www.w3.org/2000/svg"),l(i,"class","h-6 w-6 text-yellow-300"),l(i,"fill","none"),l(i,"viewBox","0 0 24 24"),l(i,"stroke","currentColor"),l(i,"stroke-width","2"),l(o,"class","flex gap-2"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(h,g){P(h,t,g),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(i,a),f(o,u),f(o,d),f(o,p)},p(h,[g]){g&1&&c!==(c=(h[0]===void 0?"-":h[0])+"")&&z(d,c)},i:$,o:$,d(h){h&&O(t)}}}function st(e,t,n){let r;return U(e,rt,s=>n(0,r=s)),[r]}class at extends q{constructor(t){super(),I(this,t,st,ot,A,{})}}function lt(e){let t;return{c(){t=C("-")},m(n,r){P(n,t,r)},p:$,d(n){n&&O(t)}}}function ct(e){let t=e[0].bpm+"",n,r,s=e[0].confidence+"",o,i;return{c(){n=C(t),r=C(" ("),o=C(s),i=C("%)")},m(a,u){P(a,n,u),P(a,r,u),P(a,o,u),P(a,i,u)},p(a,u){u&1&&t!==(t=a[0].bpm+"")&&z(n,t),u&1&&s!==(s=a[0].confidence+"")&&z(o,s)},d(a){a&&O(n),a&&O(r),a&&O(o),a&&O(i)}}}function ut(e){let t,n,r,s,o,i,a,u;function c(h,g){return h[0]!==void 0?ct:lt}let d=c(e),p=d(e);return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Heart Rate",s=_(),o=v("div"),i=E("svg"),a=E("path"),u=_(),p.c(),l(r,"class","card-title"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"),l(i,"xmlns","http://www.w3.org/2000/svg"),l(i,"class","h-6 w-6 text-red-500"),l(i,"fill","none"),l(i,"viewBox","0 0 24 24"),l(i,"stroke","currentColor"),l(i,"stroke-width","2"),l(o,"class","flex gap-2"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(h,g){P(h,t,g),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(i,a),f(o,u),p.m(o,null)},p(h,[g]){d===(d=c(h))&&p?p.p(h,g):(p.d(1),p=d(h),p&&(p.c(),p.m(o,null)))},i:$,o:$,d(h){h&&O(t),p.d()}}}function ft(e,t,n){let r;return U(e,it,s=>n(0,r=s)),[r]}class dt extends q{constructor(t){super(),I(this,t,ft,ut,A,{})}}function pt(e,t,n){const r=t*60*60*1e3+n*60*1e3,s=new Date().getTime(),o=`
        const timer = require('sched').newDefaultTimer();
        timer.timer = ${r};
        require('sched').setAlarm(${s}, timer);
        require('sched').reload();
    `;return H(e,o)}function mt(e){const t=new Date,n=`
        setTime(${t.getTime()/1e3});
        if (E.setTimeZone) {
            E.setTimeZone(${t.getTimezoneOffset()/-60});
        }
    `;return H(e,n)}async function ht(e){return H(e,`
    (function(){
        const alarms = require("sched").getAlarms();
        Bluetooth.println(JSON.stringify({ t: 'alarms', alarms: alarms }));
    })();
`)}async function gt(e){return H(e,`
    (function(){
        Bluetooth.println(JSON.stringify({ t: 'temperature', temperature: E.getTemperature() }));
    })();
`)}async function vt(e){return H(e,`
    (function(){
        Bluetooth.println(JSON.stringify({ t: 'steps', steps: Bangle.getHealthStatus('day').steps }));
    })();
`)}async function wt(e,t=void 0){let n=`
    Bangle.setHRMPower(true);
    Bangle.on('HRM', (hrm) => {
      Bluetooth.println(JSON.stringify({ t: 'hrm', hrm: {
        bpm: hrm.bpm,
        confidence: hrm.confidence
      } }));
    });
  `;return t&&(n+=`setTimeout(() => Bangle.setHRMPower(false), ${t})`),H(e,n)}async function bt(e){return H(e,"Bangle.setHRMPower(false);")}function yt(e){let t,n,r,s,o,i,a,u,c,d,p,h,g,m;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Next Alarm",s=_(),o=v("div"),i=E("svg"),a=E("path"),u=_(),c=v("span"),d=v("span"),p=C(`:\r
        `),h=v("span"),g=C(`:\r
        `),m=v("span"),l(r,"class","card-title"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),l(i,"xmlns","http://www.w3.org/2000/svg"),l(i,"class","h-6 w-6 text-blue-500"),l(i,"fill","none"),l(i,"viewBox","0 0 24 24"),l(i,"stroke","currentColor"),l(i,"stroke-width","2"),Z(d,"--value",e[0]),Z(h,"--value",e[1]),Z(m,"--value",e[2]),l(c,"class","countdown font-mono text-2xl"),l(o,"class","flex gap-2"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(b,y){P(b,t,y),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(i,a),f(o,u),f(o,c),f(c,d),f(c,p),f(c,h),f(c,g),f(c,m)},p(b,[y]){y&1&&Z(d,"--value",b[0]),y&2&&Z(h,"--value",b[1]),y&4&&Z(m,"--value",b[2])},i:$,o:$,d(b){b&&O(t)}}}function ke(){const e=new Date;return e.getHours()*1e3*60*60+e.getMinutes()*1e3*60+e.getSeconds()*1e3}function _t(e,t,n){let r,s=0,o=0,i=0;const a=et.subscribe(c=>{const d=ke(),h=c.filter(g=>g.on&&g.t>d).sort((g,m)=>g.t-m.t)[0];h?r=h.t:(r=void 0,n(0,s=0),n(1,o=0),n(2,i=0))});let u;return qe(()=>{(function c(){if(r!==void 0){let d=r-ke();n(0,s=Math.floor(d/36e5)),d=d-s*36e5,n(1,o=Math.floor(d/6e4)),d=d-o*6e4,n(2,i=Math.floor(d/1e3)),s+o+i<=0&&(r=void 0,n(0,s=0),n(1,o=0),n(2,i=0))}u=setTimeout(c,1e3-Date.now()%1e3)})()}),He(()=>{clearTimeout(u),a()}),[s,o,i]}class $t extends q{constructor(t){super(),I(this,t,_t,yt,A,{})}}function xt(e){let t,n,r,s,o,i,a,u,c,d,p,h,g,m,b,y,x,j,B,L,Q;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Set Timer",s=_(),o=v("div"),i=v("div"),a=v("label"),a.innerHTML='<span class="label-text">Hours</span>',u=_(),c=v("input"),d=_(),p=v("div"),h=v("label"),h.innerHTML='<span class="label-text">Minutes</span>',g=_(),m=v("input"),b=_(),y=v("div"),x=v("button"),j=C("Set"),l(r,"class","card-title"),l(a,"class","label"),l(c,"type","number"),l(c,"class","input input-bordered w-full max-w-xs"),l(i,"class","form-control w-full max-w-xs"),l(h,"class","label"),l(m,"type","number"),l(m,"class","input input-bordered w-full max-w-xs"),l(p,"class","form-control w-full max-w-xs"),l(o,"class","flex gap-2"),l(x,"class","btn btn-secondary"),x.disabled=B=!e[3]||e[0]+e[1]===0,ue(x,"loading",e[2]),l(y,"class","card-actions"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(T,N){P(T,t,N),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(i,a),f(i,u),f(i,c),G(c,e[0]),f(o,d),f(o,p),f(p,h),f(p,g),f(p,m),G(m,e[1]),f(n,b),f(n,y),f(y,x),f(x,j),L||(Q=[Y(c,"input",e[5]),Y(m,"input",e[6]),Y(x,"click",e[4])],L=!0)},p(T,[N]){N&1&&ce(c.value)!==T[0]&&G(c,T[0]),N&2&&ce(m.value)!==T[1]&&G(m,T[1]),N&11&&B!==(B=!T[3]||T[0]+T[1]===0)&&(x.disabled=B),N&4&&ue(x,"loading",T[2])},i:$,o:$,d(T){T&&O(t),L=!1,F(Q)}}}function St(e,t,n){let r;U(e,we,d=>n(3,r=d));let s=0,o=5,i=!1;async function a(){n(2,i=!0);try{await pt(ee.connection,s,o)}finally{n(2,i=!1)}}function u(){s=ce(this.value),n(0,s)}function c(){o=ce(this.value),n(1,o)}return[s,o,i,r,a,u,c]}class kt extends q{constructor(t){super(),I(this,t,St,xt,A,{})}}function Ot(e){let t,n,r,s,o,i,a,u=(e[0]===void 0?"-":e[0])+"",c;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Steps",s=_(),o=v("div"),i=E("svg"),a=E("path"),c=C(u),l(r,"class","card-title"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),l(i,"xmlns","http://www.w3.org/2000/svg"),l(i,"class","h-6 w-6 text-green-500"),l(i,"fill","none"),l(i,"viewBox","0 0 24 24"),l(i,"stroke","currentColor"),l(i,"stroke-width","2"),l(o,"class","flex gap-2"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(d,p){P(d,t,p),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(i,a),f(o,c)},p(d,[p]){p&1&&u!==(u=(d[0]===void 0?"-":d[0])+"")&&z(c,u)},i:$,o:$,d(d){d&&O(t)}}}function Ct(e,t,n){let r;return U(e,nt,s=>n(0,r=s)),[r]}class Tt extends q{constructor(t){super(),I(this,t,Ct,Ot,A,{})}}function Pt(e){let t;return{c(){t=C("-")},m(n,r){P(n,t,r)},p:$,d(n){n&&O(t)}}}function Et(e){let t=e[0]-6+"",n,r,s,o;return{c(){n=C(t),r=C("\u2103 ("),s=C(e[0]),o=C("\u2103)")},m(i,a){P(i,n,a),P(i,r,a),P(i,s,a),P(i,o,a)},p(i,a){a&1&&t!==(t=i[0]-6+"")&&z(n,t),a&1&&z(s,i[0])},d(i){i&&O(n),i&&O(r),i&&O(s),i&&O(o)}}}function Bt(e){let t,n,r,s,o,i,a,u,c;function d(g,m){return g[0]!==void 0?Et:Pt}let p=d(e),h=p(e);return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Temperature",s=_(),o=v("div"),i=E("svg"),a=E("path"),u=E("path"),c=_(),h.c(),l(r,"class","card-title"),l(a,"stroke-linecap","round"),l(a,"stroke-linejoin","round"),l(a,"d","M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"),l(u,"stroke-linecap","round"),l(u,"stroke-linejoin","round"),l(u,"d","M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"),l(i,"xmlns","http://www.w3.org/2000/svg"),l(i,"class","h-6 w-6 text-orange-500"),l(i,"fill","none"),l(i,"viewBox","0 0 24 24"),l(i,"stroke","currentColor"),l(i,"stroke-width","2"),l(o,"class","flex gap-2"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(g,m){P(g,t,m),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(i,a),f(i,u),f(o,c),h.m(o,null)},p(g,[m]){p===(p=d(g))&&h?h.p(g,m):(h.d(1),h=p(g),h&&(h.c(),h.m(o,null)))},i:$,o:$,d(g){g&&O(t),h.d()}}}function Nt(e,t,n){let r;return U(e,tt,s=>n(0,r=s)),[r]}class At extends q{constructor(t){super(),I(this,t,Nt,Bt,A,{})}}function Lt(){return new Promise(e=>navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lon:t.coords.longitude})}))}async function Oe(e,t,n,r){const s=await fetch(`https://api.openweathermap.org/data/2.5/${e}?lat=${t}&lon=${n}&units=metric&appid=${r}`);if(!s.ok)throw new Error("Failed to fetch data");return s.json()}function Ce(e){return{dt:e.dt*1e3,temp:e.main.temp,weather:e.weather[0].main,icon:e.weather[0].icon}}async function Rt(e,t){localStorage.setItem("weather-api-key",t);const{lat:n,lon:r}=await Lt(),s=await Oe("forecast",n,r,t),o=await Oe("weather",n,r,t),i=[Ce(o),...s.list.map(Ce)],a={city:s.city.name,sunrise:s.city.sunrise,sunset:s.city.sunset},u={weather:i,location:a};await Ke(e,"my-clock-3.app.json",JSON.stringify(u))}function Mt(e){let t,n,r,s,o,i,a,u,c,d,p,h,g,m,b;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Weather",s=_(),o=v("div"),i=v("label"),i.innerHTML='<span class="label-text">API Key</span>',a=_(),u=v("input"),c=_(),d=v("div"),p=v("button"),h=C("Update"),l(r,"class","card-title"),l(i,"class","label"),l(u,"class","input input-bordered w-full"),l(u,"type","text"),l(o,"class","form-control"),l(p,"class","btn btn-secondary"),p.disabled=g=!e[2],ue(p,"loading",e[0]),l(d,"class","card-actions"),l(n,"class","card-body"),l(t,"class","card w-96 bg-base-100 shadow-xl")},m(y,x){P(y,t,x),f(t,n),f(n,r),f(n,s),f(n,o),f(o,i),f(o,a),f(o,u),G(u,e[1]),f(n,c),f(n,d),f(d,p),f(p,h),m||(b=[Y(u,"input",e[4]),Y(p,"click",e[3])],m=!0)},p(y,[x]){x&2&&u.value!==y[1]&&G(u,y[1]),x&4&&g!==(g=!y[2])&&(p.disabled=g),x&1&&ue(p,"loading",y[0])},i:$,o:$,d(y){y&&O(t),m=!1,F(b)}}}function Dt(e,t,n){var u;let r;U(e,we,c=>n(2,r=c));let s=!1,o=(u=localStorage.getItem("weather-api-key"))!=null?u:"";async function i(){if(ee.connection)try{n(0,s=!0),await Rt(ee.connection,o)}finally{n(0,s=!1)}}function a(){o=this.value,n(1,o)}return[s,o,r,i,a]}class It extends q{constructor(t){super(),I(this,t,Dt,Mt,A,{})}}function qt(e){let t,n,r,s,o,i,a,u,c,d,p,h,g,m,b,y,x,j,B,L=e[0]?"Stop":"Start",Q,T,N,be;return n=new It({}),s=new kt({}),i=new $t({}),u=new At({}),d=new Tt({}),h=new dt({}),m=new at({}),{c(){t=v("div"),J(n.$$.fragment),r=_(),J(s.$$.fragment),o=_(),J(i.$$.fragment),a=_(),J(u.$$.fragment),c=_(),J(d.$$.fragment),p=_(),J(h.$$.fragment),g=_(),J(m.$$.fragment),b=_(),y=v("div"),x=v("div"),j=v("div"),B=v("button"),Q=C(L),l(B,"class","btn btn-primary"),l(j,"class","card-actions"),l(x,"class","card-body"),l(y,"class","card w-96 bg-base-200 shadow-xl"),l(t,"class","flex flex-col justify-center items-center gap-8 p-10")},m(S,de){P(S,t,de),M(n,t,null),f(t,r),M(s,t,null),f(t,o),M(i,t,null),f(t,a),M(u,t,null),f(t,c),M(d,t,null),f(t,p),M(h,t,null),f(t,g),M(m,t,null),f(t,b),f(t,y),f(y,x),f(x,j),f(j,B),f(B,Q),T=!0,N||(be=Y(B,"click",e[1]),N=!0)},p(S,[de]){(!T||de&1)&&L!==(L=S[0]?"Stop":"Start")&&z(Q,L)},i(S){T||(R(n.$$.fragment,S),R(s.$$.fragment,S),R(i.$$.fragment,S),R(u.$$.fragment,S),R(d.$$.fragment,S),R(h.$$.fragment,S),R(m.$$.fragment,S),T=!0)},o(S){W(n.$$.fragment,S),W(s.$$.fragment,S),W(i.$$.fragment,S),W(u.$$.fragment,S),W(d.$$.fragment,S),W(h.$$.fragment,S),W(m.$$.fragment,S),T=!1},d(S){S&&O(t),D(n),D(s),D(i),D(u),D(d),D(h),D(m),N=!1,be()}}}function Ht(e,t,n){let r;U(e,we,o=>n(0,r=o));async function s(){await ee.toggle({triggers:[o=>wt(o,10*60*1e3)],polls:[mt,gt,ht,vt]},[bt])}return[r,s]}class jt extends q{constructor(t){super(),I(this,t,Ht,qt,A,{})}}new jt({target:document.getElementById("app")});
