const Ae=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Ae();function x(){}function Se(e){return e()}function he(){return Object.create(null)}function J(e){e.forEach(Se)}function Oe(e){return typeof e=="function"}function P(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Re(e){return Object.keys(e).length===0}function Ce(e,...t){if(e==null)return x;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function z(e,t,n){e.$$.on_destroy.push(Ce(t,n))}function f(e,t){e.appendChild(t)}function R(e,t,n){e.insertBefore(t,n||null)}function T(e){e.parentNode.removeChild(e)}function v(e){return document.createElement(e)}function k(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function O(e){return document.createTextNode(e)}function S(){return O(" ")}function ue(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Le(e){return Array.from(e.childNodes)}function A(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function me(e,t){e.value=t==null?"":t}function D(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ge(e,t,n){e.classList[n?"add":"remove"](t)}let V;function Q(e){V=e}function ke(){if(!V)throw new Error("Function called outside component initialization");return V}function Ie(e){ke().$$.on_mount.push(e)}function Me(e){ke().$$.on_destroy.push(e)}const X=[],ve=[],te=[],we=[],De=Promise.resolve();let fe=!1;function je(){fe||(fe=!0,De.then(Pe))}function de(e){te.push(e)}const ae=new Set;let ee=0;function Pe(){const e=V;do{for(;ee<X.length;){const t=X[ee];ee++,Q(t),We(t.$$)}for(Q(null),X.length=0,ee=0;ve.length;)ve.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];ae.has(n)||(ae.add(n),n())}te.length=0}while(X.length);for(;we.length;)we.pop()();fe=!1,ae.clear(),Q(e)}function We(e){if(e.fragment!==null){e.update(),J(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(de)}}const ne=new Set;let qe;function B(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function j(e,t,n,r){if(e&&e.o){if(ne.has(e))return;ne.add(e),qe.c.push(()=>{ne.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function W(e){e&&e.c()}function E(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,n),r||de(()=>{const u=o.map(Se).filter(Oe);s?s.push(...u):J(u),e.$$.on_mount=[]}),l.forEach(de)}function N(e,t){const n=e.$$;n.fragment!==null&&(J(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function He(e,t){e.$$.dirty[0]===-1&&(X.push(e),je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function L(e,t,n,r,i,o,s,l=[-1]){const u=V;Q(e);const a=e.$$={fragment:null,ctx:null,props:o,update:x,not_equal:i,bound:he(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:he(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};s&&s(a.root);let d=!1;if(a.ctx=n?n(e,t.props||{},(p,m,...g)=>{const h=g.length?g[0]:m;return a.ctx&&i(a.ctx[p],a.ctx[p]=h)&&(!a.skip_bound&&a.bound[p]&&a.bound[p](h),d&&He(e,p)),m}):[],a.update(),d=!0,J(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const p=Le(t.target);a.fragment&&a.fragment.l(p),p.forEach(T)}else a.fragment&&a.fragment.c();t.intro&&B(e.$$.fragment),E(e,t.target,t.anchor,t.customElement),Pe()}Q(u)}class I{$destroy(){N(this,1),this.$destroy=x}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Re(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const q=[];function Je(e,t){return{subscribe:Te(e,t).subscribe}}function Te(e,t=x){let n;const r=new Set;function i(l){if(P(e,l)&&(e=l,n)){const u=!q.length;for(const a of r)a[1](),q.push(a,e);if(u){for(let a=0;a<q.length;a+=2)q[a][0](q[a+1]);q.length=0}}}function o(l){i(l(e))}function s(l,u=x){const a=[l,u];return r.add(a),r.size===1&&(n=t(i)||x),l(e),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function M(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return Je(n,s=>{let l=!1;const u=[];let a=0,d=x;const p=()=>{if(a)return;d();const g=t(r?u[0]:u,s);o?s(g):d=Oe(g)?g:x},m=i.map((g,h)=>Ce(g,w=>{u[h]=w,a&=~(1<<h),l&&p()},()=>{a|=1<<h}));return l=!0,p(),function(){J(m),d()}})}var H,re=[];function Be(){if(navigator.platform.indexOf("Win")>=0&&(navigator.userAgent.indexOf("Chrome/54")>=0||navigator.userAgent.indexOf("Chrome/55")>=0||navigator.userAgent.indexOf("Chrome/56")>=0))return console.warn("Chrome <56 in Windows has navigator.bluetooth but it's not implemented properly"),confirm(`Web Bluetooth on Windows is not yet available.
Please click Ok to see other options for using Web Bluetooth`)&&(window.location="https://www.espruino.com/Puck.js+Quick+Start"),!1;if(navigator.bluetooth)return!0;console.warn("No Web Bluetooth on this platform");var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return e?confirm(`To use Web Bluetooth on iOS you'll need the WebBLE App.
Please click Ok to go to the App Store and download it.`)&&(window.location="https://itunes.apple.com/us/app/webble/id1193531073"):confirm(`This Web Browser doesn't support Web Bluetooth.
Please click Ok to see instructions for enabling it.`)&&(window.location="https://www.espruino.com/Quick+Start+BLE#with-web-bluetooth"),!1}var ce="6e400001-b5a3-f393-e0a9-e50e24dcca9e",ze="6e400002-b5a3-f393-e0a9-e50e24dcca9e",Fe="6e400003-b5a3-f393-e0a9-e50e24dcca9e",be=20;function $(e,t){Z.log&&Z.log(e,t)}function Ue(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Xe(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t}function ye(){if(!!re.length){var e=re.shift();$(3,"Executing "+JSON.stringify(e)+" from queue"),e.type=="write"?Z.write(e.data,e.callback,e.callbackNewline):$(1,"Unknown queue item "+JSON.stringify(e))}}function Ee(e,t){if(!!Be()){var n={on:function(d,p){this["on"+d]=p},emit:function(d,p){this["on"+d]&&this["on"+d](p)},isOpen:!1,isOpening:!0,txInProgress:!1},r=void 0,i,o,s,l=[],u=!1,a=be;return n.close=function(){n.isOpening=!1,n.isOpen?(n.isOpen=!1,n.emit("close")):e&&e(null),r&&(r.disconnect(),r=void 0,o=void 0,s=void 0,a=be)},n.write=function(d,p){d&&l.push({data:d,callback:p,maxLength:d.length}),n.isOpen&&!n.txInProgress&&m();function m(){if(u){setTimeout(m,50);return}var g;if(!!l.length){var h=l[0];Z.writeProgress(h.maxLength-h.data.length,h.maxLength),h.data.length<=a?(g=h.data,h.data=void 0):(g=h.data.substr(0,a),h.data=h.data.substr(a)),n.txInProgress=!0,$(2,"Sending "+JSON.stringify(g)),o.writeValue(Xe(g)).then(function(){$(3,"Sent"),h.data||(l.shift(),h.callback&&h.callback()),n.txInProgress=!1,m()}).catch(function(w){$(1,"SEND ERROR: "+w),l=[],n.close()})}}},navigator.bluetooth.requestDevice({filters:[{namePrefix:"Puck.js"},{namePrefix:"Pixl.js"},{namePrefix:"MDBT42Q"},{namePrefix:"RuuviTag"},{namePrefix:"iTracker"},{namePrefix:"Thingy"},{namePrefix:"Espruino"},{services:[ce]}],optionalServices:[ce]}).then(function(d){$(1,"Device Name:       "+d.name),$(1,"Device ID:         "+d.id),d.addEventListener("gattserverdisconnected",function(){$(1,"Disconnected (gattserverdisconnected)"),t&&t(),n.close()}),n.device=d,n.reconnect(e)}).catch(function(d){$(1,"ERROR: "+d),n.close()}),n.reconnect=function(d){n.device.gatt.connect().then(function(p){return $(1,"Connected"),r=p,p.getPrimaryService(ce)}).then(function(p){return $(2,"Got service"),i=p,i.getCharacteristic(Fe)}).then(function(p){return s=p,$(2,"RX characteristic:"+JSON.stringify(s)),s.addEventListener("characteristicvaluechanged",function(m){var g=m.target.value,h=Ue(g.buffer);h.length>a&&($(2,"Received packet of length "+h.length+", increasing chunk size"),a=h.length);for(var w=0;w<h.length;w++){var y=h.charCodeAt(w),C=!0;y==19?($(2,"XOFF received => pause upload"),u=!0):y==17?($(2,"XON received => resume upload"),u=!1):C=!1,C&&(h=h.substr(0,w-1)+h.substr(w+1),w--)}$(3,"Received "+JSON.stringify(h)),n.emit("data",h)}),s.startNotifications()}).then(function(){return i.getCharacteristic(ze)}).then(function(p){o=p,$(2,"TX characteristic:"+JSON.stringify(o))}).then(function(){n.txInProgress=!1,n.isOpen=!0,n.isOpening=!1,H=!1,re=[],d(n),n.emit("open"),n.write()}).catch(function(p){$(1,"ERROR: "+p),n.close()})},n}}var b;function le(e,t,n){if(!Be())return;let r;if(typeof t!="function"&&(n=t,r=new Promise((s,l)=>t=(u,a)=>{a?l(a):s(u)})),H)return $(3,"Busy - adding Puck.write to queue"),re.push({type:"write",data:e,callback:t,callbackNewline:n}),r;var i;function o(){n&&(b.cb=function(a){var d=b.received.indexOf(`
`);if(d>=0){var p=b.received.substr(0,d);b.received=b.received.substr(d+1),b.cb=void 0,i&&clearTimeout(i),i=void 0,t&&t(p),H=!1,ye()}});var s=300,l=n?100:3,u=l;i=setTimeout(function a(){i=void 0,s&&s--,u&&u--,b.hadData&&(u=l),u&&s?i=setTimeout(a,100):(b.cb=void 0,t&&t(b.received),H=!1,ye(),b.received=""),b.hadData=!1},100)}return b&&(b.isOpen||b.isOpening)?(b.txInProgress||(b.received=""),H=!0,b.write(e,o),r):(b=Ee(function(s){if(!s){b=void 0,t&&t(null);return}b.received="",b.on("data",function(l){b.received+=l,b.hadData=!0,b.cb&&b.cb(l)}),b.on("close",function(l){b=void 0}),H=!0,b.write(e,o)}),r)}const Z={debug:1,increaseMTU:!0,flowControl:!0,log:function(e,t){e<=this.debug&&console.log("<BLE> "+t)},writeProgress:function(e,t){},connect:Ee,write:le,eval:function(e,t){const n=le("Bluetooth.println(JSON.stringify("+e+`))
`,!0).then(function(r){try{return JSON.parse(r)}catch(i){return $(1,"Unable to decode "+JSON.stringify(r)+", got "+i.toString()),Promise.reject(r)}});return t?void n.then(t,r=>t(null,r)):n},setTime:function(e){var t=new Date,n="setTime("+t.getTime()/1e3+");";n+="if (E.setTimeZone) E.setTimeZone("+t.getTimezoneOffset()/-60+`);
`,le(n,e)},isConnected:function(){return b!==void 0},getConnection:function(){return b},close:function(){b&&b.close()},modal:function(e){var t=document.createElement("div");t.style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:0.5;z-index:100;background:black;",t.innerHTML='<div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-family: Sans-Serif;font-size:400%;color:white;">Click to Continue...</div>',t.onclick=function(n){e(),n.preventDefault(),document.body.removeChild(t)},document.body.appendChild(t)}};function F(e,t){return e.write(`if(1){${t}}
`)}function Qe(e,t){return new Promise((n,r)=>Z.connect(i=>{if(!i){r("Failed to connect");return}let o="";i.on("data",s=>{o+=s;const l=o.split(`
`);o=l.pop();for(const u of l)e(u)}),n(i)},t))}function Ve(){const{subscribe:e,update:t,set:n}=Te([!1,{}]);return{connection:void 0,subscribe:e,async connect({triggers:r,polls:i}){this.connection=await Qe(o=>{let s;try{s=JSON.parse(o)}catch{console.warn("Could not parse message",o);return}console.log("[command]",s),t(([l,u])=>[l,{...u,[s.t]:s}])},()=>{t(([,o])=>[!1,o])}),this.interval=setInterval(async()=>{var o;if(!((o=this.connection)!=null&&o.isOpen)){clearInterval(this.interval),this.interval=void 0;return}for(const s of i)await s(this.connection)},10*1e3),t(([,o])=>[!0,o]);for(const o of r)await o(this.connection)},async disconnect(r){this.interval&&(clearInterval(this.interval),this.interval=void 0);for(const i of r)await i(this.connection);this.connection&&(this.connection.close(),this.connection=void 0),t(([,i])=>[!1,i])},toggle(r,i){this.connection?this.disconnect(i):this.connect(r)}}}const K=Ve(),G=M(K,([,e])=>e),Ne=M(K,([e])=>e),Ze=M(G,e=>{var t,n;return(n=(t=e.alarms)==null?void 0:t.alarms)!=null?n:[]}),Ke=M(G,e=>{var t,n;return(n=(t=e.temperature)==null?void 0:t.temperature)!=null?n:0}),Ge=M(G,e=>{var t,n;return(n=(t=e.steps)==null?void 0:t.steps)!=null?n:0}),Ye=M(G,e=>{var t,n;return(n=(t=e.status)==null?void 0:t.bat)!=null?n:0}),et=M(G,e=>{var t,n;return(n=(t=e.hrm)==null?void 0:t.hrm)!=null?n:{bpm:0,confidence:0}});function tt(e){let t,n,r,i,o,s,l,u,a,d,p,m,g,h;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Next Alarm",i=S(),o=v("div"),s=k("svg"),l=k("path"),u=S(),a=v("span"),d=v("span"),p=O(`:\r
        `),m=v("span"),g=O(`:\r
        `),h=v("span"),c(r,"class","card-title"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","h-6 w-6 text-blue-500"),c(s,"fill","none"),c(s,"viewBox","0 0 24 24"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),D(d,"--value",e[0]),D(m,"--value",e[1]),D(h,"--value",e[2]),c(a,"class","countdown font-mono text-2xl"),c(o,"class","flex gap-2"),c(n,"class","card-body"),c(t,"class","card w-96 bg-base-100 shadow-xl")},m(w,y){R(w,t,y),f(t,n),f(n,r),f(n,i),f(n,o),f(o,s),f(s,l),f(o,u),f(o,a),f(a,d),f(a,p),f(a,m),f(a,g),f(a,h)},p(w,[y]){y&1&&D(d,"--value",w[0]),y&2&&D(m,"--value",w[1]),y&4&&D(h,"--value",w[2])},i:x,o:x,d(w){w&&T(t)}}}function $e(){const e=new Date;return e.getHours()*1e3*60*60+e.getMinutes()*1e3*60+e.getSeconds()*1e3}function nt(e,t,n){let r,i=0,o=0,s=0;const l=Ze.subscribe(a=>{const d=$e(),m=a.filter(g=>g.on&&g.t>d).sort((g,h)=>g.t-h.t)[0];m?r=m.t:(r=void 0,n(0,i=0),n(1,o=0),n(2,s=0))});let u;return Ie(()=>{(function a(){if(r!==void 0){let d=r-$e();n(0,i=Math.floor(d/36e5)),d=d-i*36e5,n(1,o=Math.floor(d/6e4)),d=d-o*6e4,n(2,s=Math.floor(d/1e3))}u=setTimeout(a,1e3-Date.now()%1e3)})()}),Me(()=>{clearTimeout(u),l()}),[i,o,s]}class rt extends I{constructor(t){super(),L(this,t,nt,tt,P,{})}}function it(e){let t,n,r,i,o,s,l,u,a,d;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Battery",i=S(),o=v("div"),s=k("svg"),l=k("path"),u=S(),a=O(e[0]),d=O("%"),c(r,"class","card-title"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M13 10V3L4 14h7v7l9-11h-7z"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","h-6 w-6 text-yellow-300"),c(s,"fill","none"),c(s,"viewBox","0 0 24 24"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),c(o,"class","flex gap-2"),c(n,"class","card-body"),c(t,"class","card w-96 bg-base-100 shadow-xl")},m(p,m){R(p,t,m),f(t,n),f(n,r),f(n,i),f(n,o),f(o,s),f(s,l),f(o,u),f(o,a),f(o,d)},p(p,[m]){m&1&&A(a,p[0])},i:x,o:x,d(p){p&&T(t)}}}function ot(e,t,n){let r;return z(e,Ye,i=>n(0,r=i)),[r]}class st extends I{constructor(t){super(),L(this,t,ot,it,P,{})}}function at(e){let t,n,r,i,o,s,l,u=e[0].bpm+"",a,d,p=e[0].confidence+"",m,g;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Heart Rate",i=S(),o=v("div"),s=k("svg"),l=k("path"),a=O(u),d=O(" ("),m=O(p),g=O("%)"),c(r,"class","card-title"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","h-6 w-6 text-red-500"),c(s,"fill","none"),c(s,"viewBox","0 0 24 24"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),c(o,"class","flex gap-2"),c(n,"class","card-body"),c(t,"class","card w-96 bg-base-100 shadow-xl")},m(h,w){R(h,t,w),f(t,n),f(n,r),f(n,i),f(n,o),f(o,s),f(s,l),f(o,a),f(o,d),f(o,m),f(o,g)},p(h,[w]){w&1&&u!==(u=h[0].bpm+"")&&A(a,u),w&1&&p!==(p=h[0].confidence+"")&&A(m,p)},i:x,o:x,d(h){h&&T(t)}}}function ct(e,t,n){let r;return z(e,et,i=>n(0,r=i)),[r]}class lt extends I{constructor(t){super(),L(this,t,ct,at,P,{})}}async function ut(e){return F(e,`
    (function(){
        const alarms = require("sched").getAlarms();
        Bluetooth.println(JSON.stringify({ t: 'alarms', alarms: alarms }));
    })();
`)}async function ft(e){return F(e,`
    (function(){
        Bluetooth.println(JSON.stringify({ t: 'temperature', temperature: E.getTemperature() }));
    })();
`)}async function dt(e){return F(e,`
    (function(){
        Bluetooth.println(JSON.stringify({ t: 'steps', steps: Bangle.getHealthStatus('day').steps }));
    })();
`)}async function pt(e,t=void 0){let n=`
    Bangle.setHRMPower(true);
    Bangle.on('HRM', (hrm) => {
      Bluetooth.println(JSON.stringify({ t: 'hrm', hrm: {
        bpm: hrm.bpm,
        confidence: hrm.confidence
      } }));
    });
  `;return t&&(n+=`setTimeout(() => Bangle.setHRMPower(false), ${t})`),F(e,n)}async function ht(e){return F(e,"Bangle.setHRMPower(false);")}function mt(e){let t,n,r,i,o,s,l,u;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Steps",i=S(),o=v("div"),s=k("svg"),l=k("path"),u=O(e[0]),c(r,"class","card-title"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","h-6 w-6 text-green-500"),c(s,"fill","none"),c(s,"viewBox","0 0 24 24"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),c(o,"class","flex gap-2"),c(n,"class","card-body"),c(t,"class","card w-96 bg-base-100 shadow-xl")},m(a,d){R(a,t,d),f(t,n),f(n,r),f(n,i),f(n,o),f(o,s),f(s,l),f(o,u)},p(a,[d]){d&1&&A(u,a[0])},i:x,o:x,d(a){a&&T(t)}}}function gt(e,t,n){let r;return z(e,Ge,i=>n(0,r=i)),[r]}class vt extends I{constructor(t){super(),L(this,t,gt,mt,P,{})}}function wt(e){let t,n,r,i,o,s,l,u,a=e[0]-6+"",d,p,m,g;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Temperature",i=S(),o=v("div"),s=k("svg"),l=k("path"),u=k("path"),d=O(a),p=O("\u2103 ("),m=O(e[0]),g=O("\u2103)"),c(r,"class","card-title"),c(l,"stroke-linecap","round"),c(l,"stroke-linejoin","round"),c(l,"d","M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"),c(u,"stroke-linecap","round"),c(u,"stroke-linejoin","round"),c(u,"d","M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"),c(s,"xmlns","http://www.w3.org/2000/svg"),c(s,"class","h-6 w-6 text-orange-500"),c(s,"fill","none"),c(s,"viewBox","0 0 24 24"),c(s,"stroke","currentColor"),c(s,"stroke-width","2"),c(o,"class","flex gap-2"),c(n,"class","card-body"),c(t,"class","card w-96 bg-base-100 shadow-xl")},m(h,w){R(h,t,w),f(t,n),f(n,r),f(n,i),f(n,o),f(o,s),f(s,l),f(s,u),f(o,d),f(o,p),f(o,m),f(o,g)},p(h,[w]){w&1&&a!==(a=h[0]-6+"")&&A(d,a),w&1&&A(m,h[0])},i:x,o:x,d(h){h&&T(t)}}}function bt(e,t,n){let r;return z(e,Ke,i=>n(0,r=i)),[r]}class yt extends I{constructor(t){super(),L(this,t,bt,wt,P,{})}}async function $t(e,t,n){const r=`require('Storage').write('${t}',${n});`;return F(e,r)}function xt(){return new Promise(e=>navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lon:t.coords.longitude})}))}async function xe(e,t,n,r){const i=await fetch(`https://api.openweathermap.org/data/2.5/${e}?lat=${t}&lon=${n}&units=metric&appid=${r}`);if(!i.ok)throw new Error("Failed to fetch data");return i.json()}function _e(e){return{dt:e.dt*1e3,temp:e.main.temp,weather:e.weather[0].main,icon:e.weather[0].icon}}async function _t(e,t){localStorage.setItem("weather-api-key",t);const{lat:n,lon:r}=await xt(),i=await xe("forecast",n,r,t),o=await xe("weather",n,r,t),s=[_e(o),...i.list.map(_e)],l={city:i.city.name,sunrise:i.city.sunrise,sunset:i.city.sunset},u={weather:s,location:l};await $t(e,"my-clock-3.app.json",JSON.stringify(u))}function St(e){let t,n,r,i,o,s,l,u,a,d,p,m,g,h,w;return{c(){t=v("div"),n=v("div"),r=v("h2"),r.textContent="Weather",i=S(),o=v("div"),s=v("label"),s.innerHTML='<span class="label-text">API Key</span>',l=S(),u=v("input"),a=S(),d=v("div"),p=v("button"),m=O("Update"),c(r,"class","card-title"),c(s,"class","label"),c(u,"class","input input-bordered w-full"),c(u,"type","text"),c(o,"class","form-control"),c(p,"class","btn btn-secondary"),p.disabled=g=!e[2],ge(p,"loading",e[0]),c(d,"class","card-actions"),c(n,"class","card-body"),c(t,"class","card w-96 bg-base-100 shadow-xl")},m(y,C){R(y,t,C),f(t,n),f(n,r),f(n,i),f(n,o),f(o,s),f(o,l),f(o,u),me(u,e[1]),f(n,a),f(n,d),f(d,p),f(p,m),h||(w=[ue(u,"input",e[4]),ue(p,"click",e[3])],h=!0)},p(y,[C]){C&2&&u.value!==y[1]&&me(u,y[1]),C&4&&g!==(g=!y[2])&&(p.disabled=g),C&1&&ge(p,"loading",y[0])},i:x,o:x,d(y){y&&T(t),h=!1,J(w)}}}function Ot(e,t,n){var u;let r;z(e,Ne,a=>n(2,r=a));let i=!1,o=(u=localStorage.getItem("weather-api-key"))!=null?u:"";async function s(){if(K.connection)try{n(0,i=!0),await _t(K.connection,o)}finally{n(0,i=!1)}}function l(){o=this.value,n(1,o)}return[i,o,r,s,l]}class Ct extends I{constructor(t){super(),L(this,t,Ot,St,P,{})}}function kt(e){let t,n,r,i,o,s,l,u,a,d,p,m,g,h,w,y,C,Y=e[0]?"Stop":"Start",ie,U,oe,pe;return n=new Ct({}),i=new rt({}),s=new yt({}),u=new vt({}),d=new lt({}),m=new st({}),{c(){t=v("div"),W(n.$$.fragment),r=S(),W(i.$$.fragment),o=S(),W(s.$$.fragment),l=S(),W(u.$$.fragment),a=S(),W(d.$$.fragment),p=S(),W(m.$$.fragment),g=S(),h=v("div"),w=v("div"),y=v("div"),C=v("button"),ie=O(Y),c(C,"class","btn btn-primary"),c(y,"class","card-actions"),c(w,"class","card-body"),c(h,"class","card w-96 bg-base-200 shadow-xl"),c(t,"class","flex flex-col justify-center items-center gap-8 p-10")},m(_,se){R(_,t,se),E(n,t,null),f(t,r),E(i,t,null),f(t,o),E(s,t,null),f(t,l),E(u,t,null),f(t,a),E(d,t,null),f(t,p),E(m,t,null),f(t,g),f(t,h),f(h,w),f(w,y),f(y,C),f(C,ie),U=!0,oe||(pe=ue(C,"click",e[1]),oe=!0)},p(_,[se]){(!U||se&1)&&Y!==(Y=_[0]?"Stop":"Start")&&A(ie,Y)},i(_){U||(B(n.$$.fragment,_),B(i.$$.fragment,_),B(s.$$.fragment,_),B(u.$$.fragment,_),B(d.$$.fragment,_),B(m.$$.fragment,_),U=!0)},o(_){j(n.$$.fragment,_),j(i.$$.fragment,_),j(s.$$.fragment,_),j(u.$$.fragment,_),j(d.$$.fragment,_),j(m.$$.fragment,_),U=!1},d(_){_&&T(t),N(n),N(i),N(s),N(u),N(d),N(m),oe=!1,pe()}}}function Pt(e,t,n){let r;z(e,Ne,o=>n(0,r=o));async function i(){await K.toggle({triggers:[o=>pt(o,10*60*1e3)],polls:[ft,ut,dt]},[ht])}return[r,i]}class Tt extends I{constructor(t){super(),L(this,t,Pt,kt,P,{})}}new Tt({target:document.getElementById("app")});
