const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};G();function S(){}function T(t){return t()}function j(){return Object.create(null)}function v(t){t.forEach(T)}function Q(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function V(t){return Object.keys(t).length===0}function f(t,e){t.appendChild(e)}function B(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function K(t){return document.createTextNode(t)}function x(){return K(" ")}function N(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function X(t){return Array.from(t.childNodes)}function Y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function F(t,e){t.value=e==null?"":e}function Z(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}let w;function $(t){w=t}function tt(){if(!w)throw new Error("Function called outside component initialization");return w}function et(){const t=tt();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=Z(e,n,{cancelable:o});return r.slice().forEach(c=>{c.call(t,i)}),!i.defaultPrevented}return!0}}const y=[],I=[],E=[],W=[],nt=Promise.resolve();let A=!1;function rt(){A||(A=!0,nt.then(z))}function O(t){E.push(t)}const L=new Set;let b=0;function z(){const t=w;do{for(;b<y.length;){const e=y[b];b++,$(e),ot(e.$$)}for($(null),y.length=0,b=0;I.length;)I.pop()();for(let e=0;e<E.length;e+=1){const n=E[e];L.has(n)||(L.add(n),n())}E.length=0}while(y.length);for(;W.length;)W.pop()();A=!1,L.clear(),$(t)}function ot(t){if(t.fragment!==null){t.update(),v(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const k=new Set;let it;function D(t,e){t&&t.i&&(k.delete(t),t.i(e))}function ct(t,e,n,o){if(t&&t.o){if(k.has(t))return;k.add(t),it.c.push(()=>{k.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function at(t){t&&t.c()}function H(t,e,n,o){const{fragment:r,on_mount:i,on_destroy:c,after_update:s}=t.$$;r&&r.m(e,n),o||O(()=>{const a=i.map(T).filter(Q);c?c.push(...a):v(a),t.$$.on_mount=[]}),s.forEach(O)}function J(t,e){const n=t.$$;n.fragment!==null&&(v(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){t.$$.dirty[0]===-1&&(y.push(t),rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,o,r,i,c,s=[-1]){const a=w;$(t);const l=t.$$={fragment:null,ctx:null,props:i,update:S,not_equal:r,bound:j(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:j(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};c&&c(l.root);let m=!1;if(l.ctx=n?n(t,e.props||{},(u,g,..._)=>{const h=_.length?_[0]:g;return l.ctx&&r(l.ctx[u],l.ctx[u]=h)&&(!l.skip_bound&&l.bound[u]&&l.bound[u](h),m&&st(t,u)),g}):[],l.update(),m=!0,v(l.before_update),l.fragment=o?o(l.ctx):!1,e.target){if(e.hydrate){const u=X(e.target);l.fragment&&l.fragment.l(u),u.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&D(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),z()}$(a)}class U{$destroy(){J(this,1),this.$destroy=S}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(e){this.$$set&&!V(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function lt(t,e){return Puck.write(`require('Storage').write('${t}',atob("${btoa(e)}"));
`)}function ut(){return new Promise(t=>navigator.geolocation.getCurrentPosition(e=>{t({lat:e.coords.latitude,lon:e.coords.longitude})}))}async function M(t,e,n,o){const r=await fetch(`https://api.openweathermap.org/data/2.5/${t}?lat=${e}&lon=${n}&units=metric&appid=${o}`);if(!r.ok)throw new Error("Failed to fetch data");return r.json()}async function ft(t){localStorage.setItem("weather-api-key",t);const{lat:e,lon:n}=await ut(),o=await M("forecast",e,n,t),r=await M("weather",e,n,t),i=[{dt:r.dt*1e3,temp:r.main.temp,weather:r.weather[0].main,icon:r.weather[0].icon},...o.list.map(a=>({dt:a.dt*1e3,temp:a.main.temp,weather:a.weather[0].main,icon:a.weather[0].icon}))],c={city:o.city.name,sunrise:o.city.sunrise,sunset:o.city.sunset},s={weather:i,location:c};await lt("my-clock-3.app.json",JSON.stringify(s))}function dt(t){let e,n,o,r,i,c,s,a,l,m,u,g,_;return{c(){e=p("div"),n=p("div"),o=p("h2"),o.textContent="Weather",r=x(),i=p("div"),c=p("label"),c.innerHTML='<span class="label-text">API Key</span>',s=x(),a=p("input"),l=x(),m=p("div"),u=p("button"),u.textContent="Upload",d(o,"class","card-title"),d(c,"class","label"),d(a,"class","input input-bordered w-full"),d(a,"type","text"),d(i,"class","form-control"),d(u,"class","btn"),d(m,"class","card-actions"),d(n,"class","card-body"),d(e,"class","card w-96 bg-base-100 shadow-xl")},m(h,C){B(h,e,C),f(e,n),f(n,o),f(n,r),f(n,i),f(i,c),f(i,s),f(i,a),F(a,t[0]),f(n,l),f(n,m),f(m,u),g||(_=[N(a,"input",t[2]),N(u,"click",t[1])],g=!0)},p(h,[C]){C&1&&a.value!==h[0]&&F(a,h[0])},i:S,o:S,d(h){h&&P(e),g=!1,v(_)}}}function pt(t,e,n){var s;let o=(s=localStorage.getItem("weather-api-key"))!=null?s:"";const r=et();function i(){r("sync",{apiKey:o})}function c(){o=this.value,n(0,o)}return[o,i,c]}class ht extends U{constructor(e){super(),R(this,e,pt,dt,q,{})}}function mt(t){let e,n,o,r,i,c;return n=new ht({}),n.$on("sync",t[1]),{c(){e=p("div"),at(n.$$.fragment),o=x(),r=p("div"),i=K(t[0]),d(r,"class","alert"),d(e,"class","flex flex-col justify-center items-center gap-8 p-10")},m(s,a){B(s,e,a),H(n,e,null),f(e,o),f(e,r),f(r,i),c=!0},p(s,[a]){(!c||a&1)&&Y(i,s[0])},i(s){c||(D(n.$$.fragment,s),c=!0)},o(s){ct(n.$$.fragment,s),c=!1},d(s){s&&P(e),J(n)}}}function gt(t,e,n){let o="Ready";async function r(i){try{await ft(i.detail.apiKey),n(0,o="Successfully uploaded weather data")}catch(c){n(0,o="Failed to upload weather data"),console.error(c)}}return[o,r]}class _t extends U{constructor(e){super(),R(this,e,gt,mt,q,{})}}new _t({target:document.getElementById("app")});
