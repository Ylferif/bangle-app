const De=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};De();function $(){}function Te(e){return e()}function ye(){return Object.create(null)}function z(e){e.forEach(Te)}function Pe(e){return typeof e=="function"}function E(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Re(e){return Object.keys(e).length===0}function Ae(e,...t){if(e==null)return $;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function F(e,t,n){e.$$.on_destroy.push(Ae(t,n))}function f(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function A(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function O(e){return document.createTextNode(e)}function _(){return O(" ")}function G(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ae(e){return e===""?null:+e}function Ie(e){return Array.from(e.childNodes)}function q(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function K(e,t){e.value=t==null?"":t}function Q(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ue(e,t,n){e.classList[n?"add":"remove"](t)}let ne;function te(e){ne=e}function Be(){if(!ne)throw new Error("Function called outside component initialization");return ne}function je(e){Be().$$.on_mount.push(e)}function We(e){Be().$$.on_destroy.push(e)}const ee=[],_e=[],se=[],$e=[],Je=Promise.resolve();let ge=!1;function He(){ge||(ge=!0,Je.then(Ne))}function be(e){se.push(e)}const pe=new Set;let oe=0;function Ne(){const e=ne;do{for(;oe<ee.length;){const t=ee[oe];oe++,te(t),qe(t.$$)}for(te(null),ee.length=0,oe=0;_e.length;)_e.pop()();for(let t=0;t<se.length;t+=1){const n=se[t];pe.has(n)||(pe.add(n),n())}se.length=0}while(ee.length);for(;$e.length;)$e.pop()();ge=!1,pe.clear(),te(e)}function qe(e){if(e.fragment!==null){e.update(),z(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}const le=new Set;let ze;function M(e,t){e&&e.i&&(le.delete(e),e.i(t))}function J(e,t,n,r){if(e&&e.o){if(le.has(e))return;le.add(e),ze.c.push(()=>{le.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function H(e){e&&e.c()}function D(e,t,n,r){const{fragment:o,on_mount:s,on_destroy:i,after_update:l}=e.$$;o&&o.m(t,n),r||be(()=>{const c=s.map(Te).filter(Pe);i?i.push(...c):z(c),e.$$.on_mount=[]}),l.forEach(be)}function R(e,t){const n=e.$$;n.fragment!==null&&(z(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Fe(e,t){e.$$.dirty[0]===-1&&(ee.push(e),He(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function I(e,t,n,r,o,s,i,l=[-1]){const c=ne;te(e);const u=e.$$={fragment:null,ctx:null,props:s,update:$,not_equal:o,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ye(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};i&&i(u.root);let d=!1;if(u.ctx=n?n(e,t.props||{},(p,h,...g)=>{const m=g.length?g[0]:h;return u.ctx&&o(u.ctx[p],u.ctx[p]=m)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](m),d&&Fe(e,p)),h}):[],u.update(),d=!0,z(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const p=Ie(t.target);u.fragment&&u.fragment.l(p),p.forEach(C)}else u.fragment&&u.fragment.c();t.intro&&M(e.$$.fragment),D(e,t.target,t.anchor,t.customElement),Ne()}te(c)}class j{$destroy(){R(this,1),this.$destroy=$}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Re(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const V=[];function Ue(e,t){return{subscribe:Ee(e,t).subscribe}}function Ee(e,t=$){let n;const r=new Set;function o(l){if(E(e,l)&&(e=l,n)){const c=!V.length;for(const u of r)u[1](),V.push(u,e);if(c){for(let u=0;u<V.length;u+=2)V[u][0](V[u+1]);V.length=0}}}function s(l){o(l(e))}function i(l,c=$){const u=[l,c];return r.add(u),r.size===1&&(n=t(o)||$),l(e),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:o,update:s,subscribe:i}}function U(e,t,n){const r=!Array.isArray(e),o=r?[e]:e,s=t.length<2;return Ue(n,i=>{let l=!1;const c=[];let u=0,d=$;const p=()=>{if(u)return;d();const g=t(r?c[0]:c,i);s?i(g):d=Pe(g)?g:$},h=o.map((g,m)=>Ae(g,w=>{c[m]=w,u&=~(1<<m),l&&p()},()=>{u|=1<<m}));return l=!0,p(),function(){z(h),d()}})}var Z,ce=[];function Le(){if(navigator.platform.indexOf("Win")>=0&&(navigator.userAgent.indexOf("Chrome/54")>=0||navigator.userAgent.indexOf("Chrome/55")>=0||navigator.userAgent.indexOf("Chrome/56")>=0))return console.warn("Chrome <56 in Windows has navigator.bluetooth but it's not implemented properly"),confirm(`Web Bluetooth on Windows is not yet available.
Please click Ok to see other options for using Web Bluetooth`)&&(window.location="https://www.espruino.com/Puck.js+Quick+Start"),!1;if(navigator.bluetooth)return!0;console.warn("No Web Bluetooth on this platform");var e=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return e?confirm(`To use Web Bluetooth on iOS you'll need the WebBLE App.
Please click Ok to go to the App Store and download it.`)&&(window.location="https://itunes.apple.com/us/app/webble/id1193531073"):confirm(`This Web Browser doesn't support Web Bluetooth.
Please click Ok to see instructions for enabling it.`)&&(window.location="https://www.espruino.com/Quick+Start+BLE#with-web-bluetooth"),!1}var me="6e400001-b5a3-f393-e0a9-e50e24dcca9e",Xe="6e400002-b5a3-f393-e0a9-e50e24dcca9e",Qe="6e400003-b5a3-f393-e0a9-e50e24dcca9e",xe=20;function k(e,t){re.log&&re.log(e,t)}function Ve(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function Ze(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t}function Se(){if(!!ce.length){var e=ce.shift();k(3,"Executing "+JSON.stringify(e)+" from queue"),e.type=="write"?re.write(e.data,e.callback,e.callbackNewline):k(1,"Unknown queue item "+JSON.stringify(e))}}function Me(e,t){if(!!Le()){var n={on:function(d,p){this["on"+d]=p},emit:function(d,p){this["on"+d]&&this["on"+d](p)},isOpen:!1,isOpening:!0,txInProgress:!1},r=void 0,o,s,i,l=[],c=!1,u=xe;return n.close=function(){n.isOpening=!1,n.isOpen?(n.isOpen=!1,n.emit("close")):e&&e(null),r&&(r.disconnect(),r=void 0,s=void 0,i=void 0,u=xe)},n.write=function(d,p){d&&l.push({data:d,callback:p,maxLength:d.length}),n.isOpen&&!n.txInProgress&&h();function h(){if(c){setTimeout(h,50);return}var g;if(!!l.length){var m=l[0];re.writeProgress(m.maxLength-m.data.length,m.maxLength),m.data.length<=u?(g=m.data,m.data=void 0):(g=m.data.substr(0,u),m.data=m.data.substr(u)),n.txInProgress=!0,k(2,"Sending "+JSON.stringify(g)),s.writeValue(Ze(g)).then(function(){k(3,"Sent"),m.data||(l.shift(),m.callback&&m.callback()),n.txInProgress=!1,h()}).catch(function(w){k(1,"SEND ERROR: "+w),l=[],n.close()})}}},navigator.bluetooth.requestDevice({filters:[{namePrefix:"Puck.js"},{namePrefix:"Pixl.js"},{namePrefix:"MDBT42Q"},{namePrefix:"RuuviTag"},{namePrefix:"iTracker"},{namePrefix:"Thingy"},{namePrefix:"Espruino"},{services:[me]}],optionalServices:[me]}).then(function(d){k(1,"Device Name:       "+d.name),k(1,"Device ID:         "+d.id),d.addEventListener("gattserverdisconnected",function(){k(1,"Disconnected (gattserverdisconnected)"),t&&t(),n.close()}),n.device=d,n.reconnect(e)}).catch(function(d){k(1,"ERROR: "+d),n.close()}),n.reconnect=function(d){n.device.gatt.connect().then(function(p){return k(1,"Connected"),r=p,p.getPrimaryService(me)}).then(function(p){return k(2,"Got service"),o=p,o.getCharacteristic(Qe)}).then(function(p){return i=p,k(2,"RX characteristic:"+JSON.stringify(i)),i.addEventListener("characteristicvaluechanged",function(h){var g=h.target.value,m=Ve(g.buffer);m.length>u&&(k(2,"Received packet of length "+m.length+", increasing chunk size"),u=m.length);for(var w=0;w<m.length;w++){var y=m.charCodeAt(w),x=!0;y==19?(k(2,"XOFF received => pause upload"),c=!0):y==17?(k(2,"XON received => resume upload"),c=!1):x=!1,x&&(m=m.substr(0,w-1)+m.substr(w+1),w--)}k(3,"Received "+JSON.stringify(m)),n.emit("data",m)}),i.startNotifications()}).then(function(){return o.getCharacteristic(Xe)}).then(function(p){s=p,k(2,"TX characteristic:"+JSON.stringify(s))}).then(function(){n.txInProgress=!1,n.isOpen=!0,n.isOpening=!1,Z=!1,ce=[],d(n),n.emit("open"),n.write()}).catch(function(p){k(1,"ERROR: "+p),n.close()})},n}}var v;function he(e,t,n){if(!Le())return;let r;if(typeof t!="function"&&(n=t,r=new Promise((i,l)=>t=(c,u)=>{u?l(u):i(c)})),Z)return k(3,"Busy - adding Puck.write to queue"),ce.push({type:"write",data:e,callback:t,callbackNewline:n}),r;var o;function s(){n&&(v.cb=function(u){var d=v.received.indexOf(`
`);if(d>=0){var p=v.received.substr(0,d);v.received=v.received.substr(d+1),v.cb=void 0,o&&clearTimeout(o),o=void 0,t&&t(p),Z=!1,Se()}});var i=300,l=n?100:3,c=l;o=setTimeout(function u(){o=void 0,i&&i--,c&&c--,v.hadData&&(c=l),c&&i?o=setTimeout(u,100):(v.cb=void 0,t&&t(v.received),Z=!1,Se(),v.received=""),v.hadData=!1},100)}return v&&(v.isOpen||v.isOpening)?(v.txInProgress||(v.received=""),Z=!0,v.write(e,s),r):(v=Me(function(i){if(!i){v=void 0,t&&t(null);return}v.received="",v.on("data",function(l){v.received+=l,v.hadData=!0,v.cb&&v.cb(l)}),v.on("close",function(l){v=void 0}),Z=!0,v.write(e,s)}),r)}const re={debug:1,increaseMTU:!0,flowControl:!0,log:function(e,t){e<=this.debug&&console.log("<BLE> "+t)},writeProgress:function(e,t){},connect:Me,write:he,eval:function(e,t){const n=he("Bluetooth.println(JSON.stringify("+e+`))
`,!0).then(function(r){try{return JSON.parse(r)}catch(o){return k(1,"Unable to decode "+JSON.stringify(r)+", got "+o.toString()),Promise.reject(r)}});return t?void n.then(t,r=>t(null,r)):n},setTime:function(e){var t=new Date,n="setTime("+t.getTime()/1e3+");";n+="if (E.setTimeZone) E.setTimeZone("+t.getTimezoneOffset()/-60+`);
`,he(n,e)},isConnected:function(){return v!==void 0},getConnection:function(){return v},close:function(){v&&v.close()},modal:function(e){var t=document.createElement("div");t.style="position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:0.5;z-index:100;background:black;",t.innerHTML='<div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-family: Sans-Serif;font-size:400%;color:white;">Click to Continue...</div>',t.onclick=function(n){e(),n.preventDefault(),document.body.removeChild(t)},document.body.appendChild(t)}};function fe(e,t){return new Promise(n=>e.write(`if(1){${t}}
`,n))}async function Ke(e,t,n){const r=`require('Storage').write('${t}',${n});`;return fe(e,r)}function Ge(e,t){return new Promise((n,r)=>re.connect(o=>{if(!o){r("Failed to connect");return}let s="";o.on("data",i=>{s+=i;const l=s.split(`
`);s=l.pop();for(const c of l)e(c)}),n(o)},t))}function Ye(){const{subscribe:e,update:t}=Ee([!1,{}]);return{connection:void 0,subscribe:e,async connect(){this.connection=await Ge(n=>{let r;try{r=JSON.parse(n)}catch{console.warn("Could not parse message",n);return}console.log("[command]",r),t(([o,s])=>[o,{...s,[r.t]:r}])},()=>{t(([,n])=>[!1,n])}),t(([,n])=>[!0,n])},async disconnect(){this.connection&&(this.connection.close(),this.connection=void 0),t(([,n])=>[!1,n])},async toggle(n,r){this.connection?(await r(this.connection),await this.disconnect()):(await this.connect(),await n(this.connection))}}}const Y=Ye(),ie=U(Y,([,e])=>e),ve=U(Y,([e])=>e),et=U(ie,e=>{var t,n;return(n=(t=e.alarms)==null?void 0:t.alarms)!=null?n:[]}),tt=U(ie,e=>{var t;return(t=e.temperature)==null?void 0:t.temperature}),nt=U(ie,e=>{var t;return(t=e.steps)==null?void 0:t.steps}),rt=U(ie,e=>{var t;return(t=e.status)==null?void 0:t.bat}),it=U(ie,e=>{var t;return(t=e.hrm)==null?void 0:t.hrm});function ot(e){let t,n,r,o,s,i,l,c,u=(e[0]===void 0?"-":e[0])+"",d,p;return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Battery",o=_(),s=b("div"),i=A("svg"),l=A("path"),c=_(),d=O(u),p=O("%"),a(r,"class","card-title"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"d","M13 10V3L4 14h7v7l9-11h-7z"),a(i,"xmlns","http://www.w3.org/2000/svg"),a(i,"class","h-6 w-6 text-yellow-300"),a(i,"fill","none"),a(i,"viewBox","0 0 24 24"),a(i,"stroke","currentColor"),a(i,"stroke-width","2"),a(s,"class","flex gap-2"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(h,g){P(h,t,g),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(i,l),f(s,c),f(s,d),f(s,p)},p(h,[g]){g&1&&u!==(u=(h[0]===void 0?"-":h[0])+"")&&q(d,u)},i:$,o:$,d(h){h&&C(t)}}}function st(e,t,n){let r;return F(e,rt,o=>n(0,r=o)),[r]}class lt extends j{constructor(t){super(),I(this,t,st,ot,E,{})}}function at(e){let t;return{c(){t=O("-")},m(n,r){P(n,t,r)},p:$,d(n){n&&C(t)}}}function ut(e){let t=e[0].bpm+"",n,r,o=e[0].confidence+"",s,i;return{c(){n=O(t),r=O(" ("),s=O(o),i=O("%)")},m(l,c){P(l,n,c),P(l,r,c),P(l,s,c),P(l,i,c)},p(l,c){c&1&&t!==(t=l[0].bpm+"")&&q(n,t),c&1&&o!==(o=l[0].confidence+"")&&q(s,o)},d(l){l&&C(n),l&&C(r),l&&C(s),l&&C(i)}}}function ct(e){let t,n,r,o,s,i,l,c;function u(h,g){return h[0]!==void 0?ut:at}let d=u(e),p=d(e);return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Heart Rate",o=_(),s=b("div"),i=A("svg"),l=A("path"),c=_(),p.c(),a(r,"class","card-title"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"),a(i,"xmlns","http://www.w3.org/2000/svg"),a(i,"class","h-6 w-6 text-red-500"),a(i,"fill","none"),a(i,"viewBox","0 0 24 24"),a(i,"stroke","currentColor"),a(i,"stroke-width","2"),a(s,"class","flex gap-2"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(h,g){P(h,t,g),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(i,l),f(s,c),p.m(s,null)},p(h,[g]){d===(d=u(h))&&p?p.p(h,g):(p.d(1),p=d(h),p&&(p.c(),p.m(s,null)))},i:$,o:$,d(h){h&&C(t),p.d()}}}function ft(e,t,n){let r;return F(e,it,o=>n(0,r=o)),[r]}class dt extends j{constructor(t){super(),I(this,t,ft,ct,E,{})}}const pt=`Bluetooth.println(JSON.stringify({ t: 'alarms', alarms: require("sched").getAlarms() }));`,mt="Bluetooth.println(JSON.stringify({ t: 'temperature', temperature: E.getTemperature() }));",ht="Bluetooth.println(JSON.stringify({ t: 'steps', steps: Bangle.getHealthStatus('day').steps }));",gt=`
Bangle.setHRMPower(true);
Bangle.on('HRM', (hrm) => {
  Bluetooth.println(JSON.stringify({ t: 'hrm', hrm: {
    bpm: hrm.bpm,
    confidence: hrm.confidence
  } }));
});
`,bt="Bangle.setHRMPower(false);",vt=`
Bangle.setBarometerPower(true);
Bangle.on('pressure', (pressure) => {
  Bluetooth.println(JSON.stringify({ t: 'pressure', pressure: pressure }));
});
`,wt="Bangle.setBarometerPower(false);";function yt(e){return fe(e,`
    ${gt};
    ${vt}

    if(global.bangleAppTimeout){
      clearTimeout(global.bangleAppTimeout);
      global.bangleAppTimeout = undefined;
    }

    (function bangleAppPoll() {
      ${pt}
      ${mt}
      ${ht}

      global.bangleAppTimeout = setTimeout(bangleAppPoll, 1000);
    })();  
  `)}function _t(e){return fe(e,`
    ${bt}
    ${wt}
    if(global.bangleAppTimeout){
      clearTimeout(global.bangleAppTimeout);
      global.bangleAppTimeout = undefined;
    }
  `)}function $t(e){let t,n,r,o,s,i,l,c,u,d,p,h,g,m;return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Next Alarm",o=_(),s=b("div"),i=A("svg"),l=A("path"),c=_(),u=b("span"),d=b("span"),p=O(`:\r
        `),h=b("span"),g=O(`:\r
        `),m=b("span"),a(r,"class","card-title"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),a(i,"xmlns","http://www.w3.org/2000/svg"),a(i,"class","h-6 w-6 text-blue-500"),a(i,"fill","none"),a(i,"viewBox","0 0 24 24"),a(i,"stroke","currentColor"),a(i,"stroke-width","2"),Q(d,"--value",e[0]),Q(h,"--value",e[1]),Q(m,"--value",e[2]),a(u,"class","countdown font-mono text-2xl"),a(s,"class","flex gap-2"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(w,y){P(w,t,y),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(i,l),f(s,c),f(s,u),f(u,d),f(u,p),f(u,h),f(u,g),f(u,m)},p(w,[y]){y&1&&Q(d,"--value",w[0]),y&2&&Q(h,"--value",w[1]),y&4&&Q(m,"--value",w[2])},i:$,o:$,d(w){w&&C(t)}}}function ke(){const e=new Date;return e.getHours()*1e3*60*60+e.getMinutes()*1e3*60+e.getSeconds()*1e3}function xt(e,t,n){let r,o=0,s=0,i=0;const l=et.subscribe(u=>{const d=ke(),h=u.filter(g=>g.on&&g.t>d).sort((g,m)=>g.t-m.t)[0];h?r=h.t:(r=void 0,n(0,o=0),n(1,s=0),n(2,i=0))});let c;return je(()=>{(function u(){if(r!==void 0){let d=r-ke();n(0,o=Math.floor(d/36e5)),d=d-o*36e5,n(1,s=Math.floor(d/6e4)),d=d-s*6e4,n(2,i=Math.floor(d/1e3)),o+s+i<=0&&(r=void 0,n(0,o=0),n(1,s=0),n(2,i=0))}c=setTimeout(u,1e3-Date.now()%1e3)})()}),We(()=>{clearTimeout(c),l()}),[o,s,i]}class St extends j{constructor(t){super(),I(this,t,xt,$t,E,{})}}function kt(e,t,n){const r=t*60*60*1e3+n*60*1e3,o=new Date().getTime(),s=`
        const timer = require('sched').newDefaultTimer();
        timer.timer = ${r};
        require('sched').setAlarm(${o}, timer);
        require('sched').reload();
    `;return fe(e,s)}function Ct(e){let t,n,r,o,s,i,l,c,u,d,p,h,g,m,w,y,x,W,B,L,X;return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Set Timer",o=_(),s=b("div"),i=b("div"),l=b("label"),l.innerHTML='<span class="label-text">Hours</span>',c=_(),u=b("input"),d=_(),p=b("div"),h=b("label"),h.innerHTML='<span class="label-text">Minutes</span>',g=_(),m=b("input"),w=_(),y=b("div"),x=b("button"),W=O("Set"),a(r,"class","card-title"),a(l,"class","label"),a(u,"type","number"),a(u,"class","input input-bordered w-full max-w-xs"),a(i,"class","form-control w-full max-w-xs"),a(h,"class","label"),a(m,"type","number"),a(m,"class","input input-bordered w-full max-w-xs"),a(p,"class","form-control w-full max-w-xs"),a(s,"class","flex gap-2"),a(x,"class","btn btn-secondary"),x.disabled=B=!e[3]||e[0]+e[1]===0,ue(x,"loading",e[2]),a(y,"class","card-actions"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(T,N){P(T,t,N),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(i,l),f(i,c),f(i,u),K(u,e[0]),f(s,d),f(s,p),f(p,h),f(p,g),f(p,m),K(m,e[1]),f(n,w),f(n,y),f(y,x),f(x,W),L||(X=[G(u,"input",e[5]),G(m,"input",e[6]),G(x,"click",e[4])],L=!0)},p(T,[N]){N&1&&ae(u.value)!==T[0]&&K(u,T[0]),N&2&&ae(m.value)!==T[1]&&K(m,T[1]),N&11&&B!==(B=!T[3]||T[0]+T[1]===0)&&(x.disabled=B),N&4&&ue(x,"loading",T[2])},i:$,o:$,d(T){T&&C(t),L=!1,z(X)}}}function Ot(e,t,n){let r;F(e,ve,d=>n(3,r=d));let o=0,s=5,i=!1;async function l(){n(2,i=!0);try{await kt(Y.connection,o,s)}finally{n(2,i=!1)}}function c(){o=ae(this.value),n(0,o)}function u(){s=ae(this.value),n(1,s)}return[o,s,i,r,l,c,u]}class Tt extends j{constructor(t){super(),I(this,t,Ot,Ct,E,{})}}function Pt(e){let t,n,r,o,s,i,l,c=(e[0]===void 0?"-":e[0])+"",u;return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Steps",o=_(),s=b("div"),i=A("svg"),l=A("path"),u=O(c),a(r,"class","card-title"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"),a(i,"xmlns","http://www.w3.org/2000/svg"),a(i,"class","h-6 w-6 text-green-500"),a(i,"fill","none"),a(i,"viewBox","0 0 24 24"),a(i,"stroke","currentColor"),a(i,"stroke-width","2"),a(s,"class","flex gap-2"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(d,p){P(d,t,p),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(i,l),f(s,u)},p(d,[p]){p&1&&c!==(c=(d[0]===void 0?"-":d[0])+"")&&q(u,c)},i:$,o:$,d(d){d&&C(t)}}}function At(e,t,n){let r;return F(e,nt,o=>n(0,r=o)),[r]}class Bt extends j{constructor(t){super(),I(this,t,At,Pt,E,{})}}function Nt(e){let t;return{c(){t=O("-")},m(n,r){P(n,t,r)},p:$,d(n){n&&C(t)}}}function Et(e){let t=e[0]-6+"",n,r,o,s;return{c(){n=O(t),r=O("\u2103 ("),o=O(e[0]),s=O("\u2103)")},m(i,l){P(i,n,l),P(i,r,l),P(i,o,l),P(i,s,l)},p(i,l){l&1&&t!==(t=i[0]-6+"")&&q(n,t),l&1&&q(o,i[0])},d(i){i&&C(n),i&&C(r),i&&C(o),i&&C(s)}}}function Lt(e){let t,n,r,o,s,i,l,c,u;function d(g,m){return g[0]!==void 0?Et:Nt}let p=d(e),h=p(e);return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Temperature",o=_(),s=b("div"),i=A("svg"),l=A("path"),c=A("path"),u=_(),h.c(),a(r,"class","card-title"),a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"d","M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"),a(c,"stroke-linecap","round"),a(c,"stroke-linejoin","round"),a(c,"d","M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"),a(i,"xmlns","http://www.w3.org/2000/svg"),a(i,"class","h-6 w-6 text-orange-500"),a(i,"fill","none"),a(i,"viewBox","0 0 24 24"),a(i,"stroke","currentColor"),a(i,"stroke-width","2"),a(s,"class","flex gap-2"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(g,m){P(g,t,m),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(i,l),f(i,c),f(s,u),h.m(s,null)},p(g,[m]){p===(p=d(g))&&h?h.p(g,m):(h.d(1),h=p(g),h&&(h.c(),h.m(s,null)))},i:$,o:$,d(g){g&&C(t),h.d()}}}function Mt(e,t,n){let r;return F(e,tt,o=>n(0,r=o)),[r]}class Dt extends j{constructor(t){super(),I(this,t,Mt,Lt,E,{})}}function Rt(){return new Promise(e=>navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lon:t.coords.longitude})}))}async function Ce(e,t,n,r){const o=await fetch(`https://api.openweathermap.org/data/2.5/${e}?lat=${t}&lon=${n}&units=metric&appid=${r}`);if(!o.ok)throw new Error("Failed to fetch data");return o.json()}function Oe(e){return{dt:e.dt*1e3,temp:e.main.temp,weather:e.weather[0].main,icon:e.weather[0].icon}}async function It(e,t){localStorage.setItem("weather-api-key",t);const{lat:n,lon:r}=await Rt(),o=await Ce("forecast",n,r,t),s=await Ce("weather",n,r,t),i=[Oe(s),...o.list.map(Oe)],l={city:o.city.name,sunrise:o.city.sunrise,sunset:o.city.sunset},c={weather:i,location:l};await Ke(e,"my-clock-3.app.json",JSON.stringify(c))}function jt(e){let t,n,r,o,s,i,l,c,u,d,p,h,g,m,w;return{c(){t=b("div"),n=b("div"),r=b("h2"),r.textContent="Weather",o=_(),s=b("div"),i=b("label"),i.innerHTML='<span class="label-text">API Key</span>',l=_(),c=b("input"),u=_(),d=b("div"),p=b("button"),h=O("Update"),a(r,"class","card-title"),a(i,"class","label"),a(c,"class","input input-bordered w-full"),a(c,"type","text"),a(s,"class","form-control"),a(p,"class","btn btn-secondary"),p.disabled=g=!e[2],ue(p,"loading",e[0]),a(d,"class","card-actions"),a(n,"class","card-body"),a(t,"class","card w-96 bg-base-100 shadow-xl")},m(y,x){P(y,t,x),f(t,n),f(n,r),f(n,o),f(n,s),f(s,i),f(s,l),f(s,c),K(c,e[1]),f(n,u),f(n,d),f(d,p),f(p,h),m||(w=[G(c,"input",e[4]),G(p,"click",e[3])],m=!0)},p(y,[x]){x&2&&c.value!==y[1]&&K(c,y[1]),x&4&&g!==(g=!y[2])&&(p.disabled=g),x&1&&ue(p,"loading",y[0])},i:$,o:$,d(y){y&&C(t),m=!1,z(w)}}}function Wt(e,t,n){var c;let r;F(e,ve,u=>n(2,r=u));let o=!1,s=(c=localStorage.getItem("weather-api-key"))!=null?c:"";async function i(){if(Y.connection)try{n(0,o=!0),await It(Y.connection,s)}finally{n(0,o=!1)}}function l(){s=this.value,n(1,s)}return[o,s,r,i,l]}class Jt extends j{constructor(t){super(),I(this,t,Wt,jt,E,{})}}function Ht(e){let t,n,r,o,s,i,l,c,u,d,p,h,g,m,w,y,x,W,B,L=e[0]?"Stop":"Start",X,T,N,we;return n=new Jt({}),o=new Tt({}),i=new St({}),c=new Dt({}),d=new Bt({}),h=new dt({}),m=new lt({}),{c(){t=b("div"),H(n.$$.fragment),r=_(),H(o.$$.fragment),s=_(),H(i.$$.fragment),l=_(),H(c.$$.fragment),u=_(),H(d.$$.fragment),p=_(),H(h.$$.fragment),g=_(),H(m.$$.fragment),w=_(),y=b("div"),x=b("div"),W=b("div"),B=b("button"),X=O(L),a(B,"class","btn btn-primary"),a(W,"class","card-actions"),a(x,"class","card-body"),a(y,"class","card w-96 bg-base-200 shadow-xl"),a(t,"class","flex flex-col justify-center items-center gap-8 p-10")},m(S,de){P(S,t,de),D(n,t,null),f(t,r),D(o,t,null),f(t,s),D(i,t,null),f(t,l),D(c,t,null),f(t,u),D(d,t,null),f(t,p),D(h,t,null),f(t,g),D(m,t,null),f(t,w),f(t,y),f(y,x),f(x,W),f(W,B),f(B,X),T=!0,N||(we=G(B,"click",e[1]),N=!0)},p(S,[de]){(!T||de&1)&&L!==(L=S[0]?"Stop":"Start")&&q(X,L)},i(S){T||(M(n.$$.fragment,S),M(o.$$.fragment,S),M(i.$$.fragment,S),M(c.$$.fragment,S),M(d.$$.fragment,S),M(h.$$.fragment,S),M(m.$$.fragment,S),T=!0)},o(S){J(n.$$.fragment,S),J(o.$$.fragment,S),J(i.$$.fragment,S),J(c.$$.fragment,S),J(d.$$.fragment,S),J(h.$$.fragment,S),J(m.$$.fragment,S),T=!1},d(S){S&&C(t),R(n),R(o),R(i),R(c),R(d),R(h),R(m),N=!1,we()}}}function qt(e,t,n){let r;F(e,ve,s=>n(0,r=s));async function o(){await Y.toggle(yt,_t)}return[r,o]}class zt extends j{constructor(t){super(),I(this,t,qt,Ht,E,{})}}new zt({target:document.getElementById("app")});
